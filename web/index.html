<!DOCTYPE html>
<html>
<head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">
  <meta name="theme-color" content="#FC7562">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="recipe_keeper">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>recipe_keeper</title>
  <link rel="manifest" href="manifest.json">
  
  <!-- Add Google Sign-In client ID -->
  <meta name="google-signin-client_id" content="682017024777-on5ondrk2tinfabj0b4smecc16jpbuo4.apps.googleusercontent.com">
  
  <!-- Add CSS to constrain width on web -->
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background-color: #f5f5f5;
      overflow: hidden;
      display: flex;
      justify-content: center;
    }
    
    /* Container for the Flutter app */
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
      max-width: 100vw;
      position: relative;
    }
    
    /* Flutter canvas element */
    canvas {
      max-width: 100%;
      max-height: 100%;
    }
    
    /* Constrain the app width on larger screens */
    @media (min-width: 768px) {
      flt-glass-pane {
        max-width: 480px !important;
        width: 100% !important;
        margin: 0 auto;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
      }
    }
    
    /* Custom Flutter loader colors - Peach theme */
    .flutter-loader {
      background-color: #FC7562 !important;
    }
    
    /* Override all loading indicator colors */
    flt-glass-pane::before,
    flt-glass-pane::after {
      background-color: #FC7562 !important;
    }
    
    /* Override progress bar colors */
    .loading-indicator,
    .progress-bar {
      background-color: #FC7562 !important;
      color: #FC7562 !important;
    }
    
    /* Override Flutter's default blue loading spinner */
    .loading-spinner,
    .spinner,
    .loading,
    .loader {
      border-color: #FC7562 !important;
      border-top-color: #FC7562 !important;
      background-color: #FC7562 !important;
    }
    
    /* Override all possible loading elements */
    [class*="loading"],
    [class*="spinner"],
    [class*="loader"],
    [class*="progress"] {
      background-color: #FC7562 !important;
      border-color: #FC7562 !important;
      color: #FC7562 !important;
    }
    
    /* Override Flutter's built-in loading animations */
    @keyframes flutter-loader {
      from {
        background-color: #FC7562;
        border-color: #FC7562;
      }
      to {
        background-color: #FC7562;
        border-color: #FC7562;
      }
    }
    
    /* Override specific blue loading elements only */
    .loading, .spinner, .progress, .indicator {
      --loading-color: #FC7562 !important;
      --spinner-color: #FC7562 !important;
      --progress-color: #FC7562 !important;
    }
    
    /* Target Flutter's specific loading animations */
    @keyframes flutter-loading {
      0% { background-color: #FC7562; }
      100% { background-color: #FC7562; }
    }
    
    /* Override any animated elements that might be blue */
    [style*="animation"], [style*="keyframes"] {
      background-color: #FC7562 !important;
    }
    
    /* Target specific Flutter loading classes */
    .flutter-loading, .flutter-spinner, .flutter-progress {
      background-color: #FC7562 !important;
      border-color: #FC7562 !important;
    }
    
    /* Override SVG elements (for animated stripes) */
    svg *, svg rect, svg circle, svg path, svg line, svg polyline, svg polygon {
      fill: #FC7562 !important;
      stroke: #FC7562 !important;
    }
    
    /* Target any blue fills or strokes */
    [fill="blue"], [fill="#2196F3"], [fill="#1976D2"],
    [stroke="blue"], [stroke="#2196F3"], [stroke="#1976D2"] {
      fill: #FC7562 !important;
      stroke: #FC7562 !important;
    }
    
    /* Override all possible blue color variations */
    [style*="fill:blue"], [style*="fill:#2196F3"], [style*="fill:#1976D2"],
    [style*="stroke:blue"], [style*="stroke:#2196F3"], [style*="stroke:#1976D2"] {
      fill: #FC7562 !important;
      stroke: #FC7562 !important;
    }
  </style>
  
  <script>
    // The value below is injected by flutter build, do not touch.
    const serviceWorkerVersion = "{{flutter_service_worker_version}}";
  </script>
  <!-- This script adds the flutter initialization JS code -->
  <script src="flutter.js" defer></script>
</head>
<body>
  <script>
    // Override only loading-related blue colors
    function overrideBlueColors() {
      const style = document.createElement('style');
      style.textContent = `
        .loading, .spinner, .progress, .indicator,
        [class*="loading"], [class*="spinner"], [class*="progress"],
        [class*="flutter"], [class*="loading"] {
          background-color: #FC7562 !important;
          border-color: #FC7562 !important;
          color: #FC7562 !important;
        }
        [style*="blue"], [style*="#2196F3"], [style*="#1976D2"],
        [style*="rgb(33, 150, 243)"], [style*="rgb(25, 118, 210)"] {
          background-color: #FC7562 !important;
          border-color: #FC7562 !important;
          color: #FC7562 !important;
        }
        /* Target any element with animation that might be blue */
        *[style*="animation"] {
          background-color: #FC7562 !important;
        }
      `;
      document.head.appendChild(style);
      
      // Also try to find and override any blue elements dynamically
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          mutation.addedNodes.forEach(function(node) {
            if (node.nodeType === 1) { // Element node
              // Check background color
              if (node.style && (node.style.backgroundColor === 'blue' || 
                  node.style.backgroundColor === '#2196F3' || 
                  node.style.backgroundColor === '#1976D2')) {
                node.style.backgroundColor = '#FC7562';
              }
              
              // Check SVG fill and stroke
              if (node.tagName === 'svg' || node.tagName === 'SVG' || 
                  node.tagName === 'path' || node.tagName === 'PATH' ||
                  node.tagName === 'rect' || node.tagName === 'RECT' ||
                  node.tagName === 'circle' || node.tagName === 'CIRCLE') {
                if (node.getAttribute('fill') === 'blue' || 
                    node.getAttribute('fill') === '#2196F3' || 
                    node.getAttribute('fill') === '#1976D2') {
                  node.setAttribute('fill', '#FC7562');
                }
                if (node.getAttribute('stroke') === 'blue' || 
                    node.getAttribute('stroke') === '#2196F3' || 
                    node.getAttribute('stroke') === '#1976D2') {
                  node.setAttribute('stroke', '#FC7562');
                }
              }
              
              // Check all child SVG elements
              const svgChildren = node.querySelectorAll('svg, path, rect, circle, line, polyline, polygon');
              svgChildren.forEach(function(child) {
                const fill = child.getAttribute('fill');
                const stroke = child.getAttribute('stroke');
                if (fill === 'blue' || fill === '#2196F3' || fill === '#1976D2') {
                  child.setAttribute('fill', '#FC7562');
                }
                if (stroke === 'blue' || stroke === '#2196F3' || stroke === '#1976D2') {
                  child.setAttribute('stroke', '#FC7562');
                }
              });
            }
          });
        });
      });
      observer.observe(document.body, { childList: true, subtree: true, attributes: true, attributeFilter: ['fill', 'stroke', 'style'] });
    }
    
    // Function to scan and override any blue elements
    function scanAndOverrideBlue() {
      // Override all SVG elements
      const allSvgElements = document.querySelectorAll('svg, path, rect, circle, line, polyline, polygon');
      allSvgElements.forEach(function(el) {
        const fill = el.getAttribute('fill');
        const stroke = el.getAttribute('stroke');
        if (fill && (fill.includes('blue') || fill.includes('#2196F3') || fill.includes('#1976D2'))) {
          el.setAttribute('fill', '#FC7562');
        }
        if (stroke && (stroke.includes('blue') || stroke.includes('#2196F3') || stroke.includes('#1976D2'))) {
          el.setAttribute('stroke', '#FC7562');
        }
        // Also check inline styles
        if (el.style.fill && (el.style.fill.includes('blue') || el.style.fill.includes('#2196F3') || el.style.fill.includes('#1976D2'))) {
          el.style.fill = '#FC7562';
        }
        if (el.style.stroke && (el.style.stroke.includes('blue') || el.style.stroke.includes('#2196F3') || el.style.stroke.includes('#1976D2'))) {
          el.style.stroke = '#FC7562';
        }
      });
      
      // Override all elements with blue background
      const allElements = document.querySelectorAll('*');
      allElements.forEach(function(el) {
        if (el.style.backgroundColor && (el.style.backgroundColor.includes('blue') || 
            el.style.backgroundColor.includes('#2196F3') || 
            el.style.backgroundColor.includes('#1976D2') ||
            el.style.backgroundColor.includes('rgb(33, 150, 243)') ||
            el.style.backgroundColor.includes('rgb(25, 118, 210)'))) {
          el.style.backgroundColor = '#FC7562';
        }
      });
    }
    
    // Apply color overrides immediately
    overrideBlueColors();
    
    // Scan for blue elements periodically during loading
    const scanInterval = setInterval(scanAndOverrideBlue, 100);
    
    // Stop scanning after 5 seconds (app should be loaded by then)
    setTimeout(function() {
      clearInterval(scanInterval);
    }, 5000);
    
    window.addEventListener('load', function(ev) {
      // Detect if we're running in a desktop browser
      var isDesktop = window.innerWidth >= 768;
      
      // Use the more compatible loadEntrypoint method
      _flutter.loader.loadEntrypoint({
        serviceWorker: {
          serviceWorkerVersion: serviceWorkerVersion,
        },
        onEntrypointLoaded: function(engineInitializer) {
          engineInitializer.initializeEngine().then(function(appRunner) {
            appRunner.runApp();
          });
        }
      });
      
      // Apply width constraints after Flutter loads
      window.addEventListener('flutter-first-frame', function() {
        // Apply width constraints
        setTimeout(function() {
          const glassPane = document.querySelector('flt-glass-pane');
          if (glassPane && isDesktop) {
            glassPane.style.maxWidth = '480px';
            glassPane.style.width = '100%';
            glassPane.style.margin = '0 auto';
            glassPane.style.boxShadow = '0 0 20px rgba(0, 0, 0, 0.1)';
            glassPane.style.borderRadius = '8px';
            glassPane.style.overflow = 'hidden';
          }
        }, 100);
      });
      
      // Register service worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('flutter-first-frame', function() {
          navigator.serviceWorker.register('flutter_service_worker.js?v=' + serviceWorkerVersion);
        });
      }
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/pako@2.0.3/dist/pako.min.js"></script>
</body>
</html>
